{% extends "@atomar/views/admin/_base.html" %}

{% block title %}CMS Light{% endblock %}

{% block content %}
<div class="page-header clearfix">
  <h2 class="pull-left">Tiny CMS <small>Settings</small></h2>
</div>
<div class="row">
  <div class="col-md-12">
    <p>To begin using CMS Light you must create some text stubs and then embed them into your template files using <code>{{ '{{' }} cms_light('stub-name', sys.template) {{ '}}' }}</code>. The <code>sys.template</code> variable is the path to the rendered template. This is an optional parameter, but using it will make it easier to track down where a stub is being used.</p>
    <a class="btn btn-primary pull-right" data-lightbox="/admin/tiny_cms/stub/new/" ><span class="glyphicon glyphicon-plus-sign"></span> Create Stub</a>
  </div>
</div>

{% if stubs|length > 0 %}
<br>
<table id="cms-light-stubs-table" class="table table-striped table-bordered">
  <tr>
    <th>Name</th>
    <th>Slug</th>
    <th>Text</th>
    <th></th>
  </tr>
  {% for s in stubs %}
    
    <tr>
      <td>{{ s.name }}</td>
      <td>{{ s.slug }} <span class="glyphicon glyphicon-info-sign pop" title="Stub Location" data-trigger="hover" data-content="{% if s.location != '' %}{{ s.location }}{% else %}Unknown{% endif%}"></span></td>
      <td>{{ word_trim(s.value, 84) }}</td>
      <td><a data-lightbox="/admin/tiny_cms/stub/{{ s.id }}/edit/"><span class="glyphicon glyphicon-edit tip" title="edit"></span></a></td>
    </tr>
  {% endfor %}
</table>
{% else %}
  <div class="well">No text stubs have been defined yet.</div>
{% endif %}
{% endblock %}